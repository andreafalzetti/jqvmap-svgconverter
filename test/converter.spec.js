/*jshint mocha: true*/

require('chai').use(require('chai-properties'));
var expect = require('chai').expect;
var fs = require('fs');
var converter = require('../converter.js');

// test
describe('svg-flatten: test samples', function () {
    it('should match expected options (sample 1)', function () {
        var sample = fs.readFileSync(__dirname + '/samples/sample1.svg', 'utf8');
        var options = converter.convertString(sample);

        expect(options).to.be.have.properties({
            width: 1921,
            height: 1134,
            paths: {
                "path-1": {
                    "class": "st0",
                    "name": null,
                    "path": "M804.5,83 917,83 917,195.5 804.5,195.5z"
                },
                "path-2": {
                    "class": "st0",
                    "name": null,
                    "path": "M1630.0708 83.4398L1849.4286 210.0898 1793.1786 307.5148 1573.8208 180.8648z"
                },
                "path-3": {
                    "class": "st0",
                    "name": null,
                    "path": "M804.5,268.7 917,268.7 917,381.2 804.5,381.2z"
                },
                "path-4": {
                    "class": "st0",
                    "name": null,
                    "path": "M804.5,454.4 917,454.4 917,566.9 804.5,566.9z"
                },
                "path-5": {
                    "class": "st0",
                    "name": null,
                    "path": "M976.7,262v294.4h294.4V262H976.7z M1221,506.4h-97.1v-97.1h97.1V506.4z"
                },
                "path-6": {
                    "class": "st0",
                    "name": null,
                    "path": "M1100,83 1212.5,83 1212.5,195.5 1100,195.5z"
                },
                "path-7": {
                    "class": null,
                    "name": "fat group!",
                    "path": "M1422,416.1c-6.3-40.5,83.3-114,173-108c90.1,6,173.9,92,175,188c1,85.5-64.1,140.2-79,152 c-97.2,76.6-220.5,30.1-236,24c-84.8-33.6-153-114.3-138-142c22.1-40.7,210.4,57.4,263-10c21.5-27.5,16-77-2-87 c-19.5-10.8-44.9,29.6-91,26C1458.8,456.8,1425.5,438.3,1422,416.1z M471.6,694.4c-51.8-19.9-94.6-50.8-127.2-91.8c5.8-8.3,12.1-16.3,18.9-24.1c24.2,6.1,43.3,8.1,52.4,8.8l1.2-16 c-7.5-0.6-22.3-2.2-41.3-6.4c7.9-8.2,16.4-16.1,25.4-23.7c46.1-39,90.2-56.3,90.6-56.5l-5.8-14.9c-1.9,0.7-47,18.4-95.2,59.2 c-11.8,10-22.7,20.5-32.8,31.5c-9.5-2.7-19.7-5.9-30.2-10c-6.9-2.7-13.7-5.5-20.3-8.6c-4.1-9.2-7.7-18.5-10.8-28.1 c6.4-36.8,19.8-71.4,39.9-103.1c16.9-26.6,38.6-51.1,64.5-73c46.1-39,90.2-56.3,90.6-56.5l-5.8-14.9c-1.9,0.7-47,18.4-95.2,59.2 c-27.1,22.9-49.9,48.7-67.6,76.7c-15.5,24.4-27.3,50.5-35.1,78c-5.5-28.5-7-58.6-4.5-89.5c5-60.2,24-103.6,24.1-104l-14.6-6.5 c-0.8,1.9-20.2,46.3-25.5,109.2c-2.9,35.4-0.8,69.7,6.4,102c1.8,8,3.9,15.9,6.3,23.7c0,0.3-0.1,0.5-0.1,0.8c-0.6,3.7-1.1,7.3-1.5,11 c-33.9-20.2-62.6-46.4-85.7-78.1c-22.9-31.5-38.8-66.7-47.2-104.8c-6.8-30.8-8.9-63.5-6.1-97.2c5-60.2,24-103.6,24.1-104L149,136 c-0.8,1.9-20.2,46.3-25.5,109.2c-2.9,35.4-0.8,69.7,6.4,102c8.9,40.2,25.7,77.5,49.9,110.7c25.9,35.5,58.4,64.4,97,86.2 c-2.5,40.6,3.1,81.1,17,120.9c-6.3,17.5-10.9,35.6-13.8,54.2c-9.4,59.4-1.1,118.7,24.5,176.4c18.7,42.2,41.8,71.3,50.8,81.8 l12.1-10.4c-8.6-10-30.5-37.7-48.4-77.9c-24.4-54.8-32.2-111.1-23.3-167.4c1.8-11.2,4.2-22.2,7.3-33c0.5,1.1,1,2.2,1.5,3.3 c18.7,42.2,41.8,71.3,50.8,81.8l12.1-10.4c-8.6-10-30.5-37.7-48.4-77.9c-3-6.8-5.8-13.6-8.3-20.4c6.4-16.9,14.5-33.1,24.2-48.6 c34,41.3,77.9,72.5,130.7,92.8c43.1,16.6,79.9,20.8,93.8,21.9l1.2-16C547.7,714.2,512.7,710.2,471.6,694.4z M323,605.6 c-7.4,11.7-14,23.8-19.7,36.2c-8.3-29.6-11.9-59.4-10.8-89.4c0.9,0.5,1.8,0.9,2.8,1.4c7.9,16.8,17.4,32.9,28.5,48.1 c0.3,0.4,0.6,0.8,0.9,1.2C324.1,603.9,323.5,604.8,323,605.6z M334.3,589.1c-5.7-8.1-11-16.5-15.8-25.1c1.1,0.4,2.3,0.9,3.4,1.3 c8.4,3.2,16.6,6,24.4,8.4C342.1,578.7,338.1,583.9,334.3,589.1z"
                },
                "path-8": {
                    "class": "st0",
                    "name": null,
                    "path": "M1100,939c-80.2-4-242.2-24-239.2-96s151-104,151-104l160.8,54"
                },
                "path-9": {
                    "class": "st0",
                    "name": null,
                    "path": "M1357.7,989 1457.7,1037 1611.7,1027 1611.7,859 1445.7,795 1387.7,813 1295.7,851"
                }
            }
        });
    });

    it('should match expected options (sample 2)', function () {
        var sample = fs.readFileSync(__dirname + '/samples/sample2.svg', 'utf8');
        var options = converter.convertString(sample);

        expect(options).to.be.have.properties({
            width: 1680,
            height: 1050,
            paths: {
                "path-0": {
                    "class": null,
                    "name": "gauche",
                    "path": "M158.2299682637 272.6653251574l-2.5651510749 7.0476946559c-0.6498382723 1.7854159795 0.0158931245 4.0496601596 1.8013091039 4.699498432l2.5371700762 0.9234543869L164.9967904614 271.6164603688 162.4596203853 270.6930059818C160.6742044058 270.0431677095 158.879806536 270.8799091779 158.2299682637 272.6653251574zM247.7581451192 301.5262944573l-2.5371700761-0.923454387-4.9592920782 13.6255430014 2.5371700761 0.923454387c1.7854159795 0.6498382723 3.5456118349-0.092933934 4.1954501072-1.8783499136l2.565151075-7.0476946559C250.2434945098 304.3464076477 249.5435610987 302.1761327296 247.7581451192 301.5262944573zM124.3699740745 365.6948946152l-2.565151075 7.0476946559c-0.6498382723 1.7854159795 0.0158931245 4.0496601596 1.801309104 4.699498432l2.5371700761 0.923454387 4.9592920782-13.6255430014L128.5654241817 363.8165447017C126.8142102166 363.0727371673 125.0540143611 363.8155093736 124.3699740745 365.6948946152zM213.89815093 394.5558639151l-2.5371700761-0.923454387-4.9592920783 13.6255430014 2.5371700762 0.923454387c1.7854159795 0.6498382723 3.5456118349-0.092933934 4.1954501072-1.8783499136l2.5651510749-7.0476946559C216.3835003206 397.3759771055 215.6835669095 395.2057021874 213.89815093 394.5558639151zM217.8683183254 287.4547538795c1.6758987023-4.6044938419-0.6208219455-9.697142884-5.2253157874-11.3730415863L218.1495268456 260.9526610986l-6.8597561318-2.4967470463-5.5065243075 15.1290511947c-4.6386958562-1.5819294402-9.6373756362 0.7489932219-11.3132743385 5.3534870637l-1.4706866163 4.0406782694L167.4396461661 273.6761826816l-4.0016356769 10.9944036632 25.4656700233 9.2687458841-20.2475924849 55.6298031506-7.9134524512 7.1230099187c-0.9400377301 0.8284497969-1.6665717027 1.9474441609-2.111197889 3.1690445679l-0.3762221576 1.0336618829c-1.2654745303 3.4768626969 0.0234945774 7.2449601797 3.0388026354 9.1937847779l-0.205212086 0.5638155725c-0.6840402867 1.8793852416-0.8640322486 3.8358112927-0.6937123956 5.7069048627L133.6138539912 366.6117828773l-4.0016356769 10.9944036632 74.4236555662 27.0879953514 4.0016356769-10.9944036632L181.3502391271 383.9864061583c1.3331883403-1.3238613407 2.452872923-2.9382672485 3.1369132097-4.8176524901l0.205212086-0.5638155725c3.4685710253 0.4111143907 6.9720342837-1.6126803611 8.237508814-5.089543058l0.3762221576-1.0336618828c0.4446261863-1.221600407 0.6073445864-2.545806857 0.4197511716-3.7846808259l-1.4834737567-10.5432113521L212.4557632799 302.6180070885l25.4656700233 9.2687458841L241.9230689801 300.8923493094 216.3634296947 291.589401411 217.8683183254 287.4547538795zM272.0861486846 257.4913283222c0.0684040287-0.1879385242 0.0428387953-0.4100790626 0.0770408096-0.5040483248-0.0255652334-0.2221405385 0.9794163846-18.4794681619 4.7758399756-28.9100562526 0.923454387-2.5371700761-0.3914250634-5.3569381572-2.9285951396-6.2803925441s-5.3569381572 0.3914250634-6.2803925441 2.9285951395c-4.0358376912 11.0883729253-5.2114842716 28.6450769189-5.3489825476 31.3618938476-0.3934957195 1.665881484-1.3166049971 3.0325816199-2.7948930664 3.8779598693-1.5124900835 0.9393475114-3.3493816392 1.0156981023-5.0408283566 0.4000618443L183.5985449462 234.5428210804c-1.6914467174-0.615636258-2.921338796-1.9146225839-3.6043437546-3.546647163-0.5890356965-1.5978225647-0.3834785012-3.3321080773 0.3516922522-4.7672122419 1.6410064693-2.1695846994 12.0256407333-16.3744912884 16.0614784246-27.4628642137 0.923454387-2.5371700761-0.3914250634-5.3569381572-2.9285951395-6.2803925441S188.2158078338 192.9113319954 187.2923534468 195.4485020716c-3.7622215766 10.3366188286-14.7621469893 25.0625021949-14.92452028 25.2162387046-0.1623732907 0.1537365098-0.2307773194 0.341675034-0.2649793338 0.4356442961C169.7778070771 225.1493550133 169.2979435484 229.9763345029 170.9199509091 234.2913191057c1.5878053464 4.4089538648 5.0384125912 7.793227737 9.3609986468 9.3665203963l71.0407621315 25.8567228354c4.4165553177 1.6074946736 9.2694451501 1.1390288006 13.191624252-1.1580369565C268.5294843034 266.0936616381 271.264610122 262.0875304924 272.0861486846 257.4913283222z"
                },
                "path-1": {
                    "class": null,
                    "name": "droite",
                    "path": "M508.2299682637 272.6653251574l-2.5651510749 7.0476946559c-0.6498382723 1.7854159795 0.0158931245 4.0496601596 1.8013091039 4.699498432l2.5371700762 0.9234543869L514.9967904614 271.6164603688 512.4596203853 270.6930059818C510.6742044058 270.0431677095 508.879806536 270.8799091779 508.2299682637 272.6653251574zM597.7581451192 301.5262944573l-2.5371700761-0.923454387-4.9592920782 13.6255430014 2.5371700761 0.923454387c1.7854159795 0.6498382723 3.5456118349-0.092933934 4.1954501072-1.8783499136l2.565151075-7.0476946559C600.2434945098 304.3464076477 599.5435610987 302.1761327296 597.7581451192 301.5262944573zM474.3699740745 365.6948946152l-2.565151075 7.0476946559c-0.6498382723 1.7854159795 0.0158931245 4.0496601596 1.801309104 4.699498432l2.5371700761 0.923454387 4.9592920782-13.6255430014L478.5654241817 363.8165447017C476.8142102166 363.0727371673 475.0540143611 363.8155093736 474.3699740745 365.6948946152zM563.89815093 394.5558639151l-2.5371700761-0.923454387-4.9592920783 13.6255430014 2.5371700762 0.923454387c1.7854159795 0.6498382723 3.5456118349-0.092933934 4.1954501072-1.8783499136l2.5651510749-7.0476946559C566.3835003206 397.3759771055 565.6835669095 395.2057021874 563.89815093 394.5558639151zM567.8683183254 287.4547538795c1.6758987023-4.6044938419-0.6208219455-9.697142884-5.2253157874-11.3730415863L568.1495268456 260.9526610986l-6.8597561318-2.4967470463-5.5065243075 15.1290511947c-4.6386958562-1.5819294402-9.6373756362 0.7489932219-11.3132743385 5.3534870637l-1.4706866163 4.0406782694L517.4396461661 273.6761826816l-4.0016356769 10.9944036632 25.4656700233 9.2687458841-20.2475924849 55.6298031506-7.9134524512 7.1230099187c-0.9400377301 0.8284497969-1.6665717027 1.9474441609-2.111197889 3.1690445679l-0.3762221576 1.0336618829c-1.2654745303 3.4768626969 0.0234945774 7.2449601797 3.0388026354 9.1937847779l-0.205212086 0.5638155725c-0.6840402867 1.8793852416-0.8640322486 3.8358112927-0.6937123956 5.7069048627L483.6138539912 366.6117828773l-4.0016356769 10.9944036632 74.4236555662 27.0879953514 4.0016356769-10.9944036632L531.3502391271 383.9864061583c1.3331883403-1.3238613407 2.452872923-2.9382672485 3.1369132097-4.8176524901l0.205212086-0.5638155725c3.4685710253 0.4111143907 6.9720342837-1.6126803611 8.237508814-5.089543058l0.3762221576-1.0336618828c0.4446261863-1.221600407 0.6073445864-2.545806857 0.4197511716-3.7846808259l-1.4834737567-10.5432113521L562.4557632799 302.6180070885l25.4656700233 9.2687458841L591.9230689801 300.8923493094 566.3634296947 291.589401411 567.8683183254 287.4547538795zM622.0861486846 257.4913283222c0.0684040287-0.1879385242 0.0428387953-0.4100790626 0.0770408096-0.5040483248-0.0255652334-0.2221405385 0.9794163846-18.4794681619 4.7758399756-28.9100562526 0.923454387-2.5371700761-0.3914250634-5.3569381572-2.9285951396-6.2803925441s-5.3569381572 0.3914250634-6.2803925441 2.9285951395c-4.0358376912 11.0883729253-5.2114842716 28.6450769189-5.3489825476 31.3618938476-0.3934957195 1.665881484-1.3166049971 3.0325816199-2.7948930664 3.8779598693-1.5124900835 0.9393475114-3.3493816392 1.0156981023-5.0408283566 0.4000618443L533.5985449462 234.5428210804c-1.6914467174-0.615636258-2.921338796-1.9146225839-3.6043437546-3.546647163-0.5890356965-1.5978225647-0.3834785012-3.3321080773 0.3516922522-4.7672122419 1.6410064693-2.1695846994 12.0256407333-16.3744912884 16.0614784246-27.4628642137 0.923454387-2.5371700761-0.3914250634-5.3569381572-2.9285951395-6.2803925441S538.2158078338 192.9113319954 537.2923534468 195.4485020716c-3.7622215766 10.3366188286-14.7621469893 25.0625021949-14.92452028 25.2162387046-0.1623732907 0.1537365098-0.2307773194 0.341675034-0.2649793338 0.4356442961C519.7778070771 225.1493550133 519.2979435484 229.9763345029 520.9199509091 234.2913191057c1.5878053464 4.4089538648 5.0384125912 7.793227737 9.3609986468 9.3665203963l71.0407621315 25.8567228354c4.4165553177 1.6074946736 9.2694451501 1.1390288006 13.191624252-1.1580369565C618.5294843034 266.0936616381 621.264610122 262.0875304924 622.0861486846 257.4913283222z"
                }
            }
        });
    });
});
